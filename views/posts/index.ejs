<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/posts/index.css">
<link rel="stylesheet" href="/stylesheets/comment.css">
<link rel="stylesheet" href="/stylesheets/post.css">
<script src="https://kit.fontawesome.com/73eb34af13.js" crossorigin="anonymous"></script>
<%- include('../partials/nav') %>

<main>
  <% posts.forEach(function(post, idx) { %>
    <%- include('../partials/post', {post, idx}) %>
  <% }) %>
</main>

<%- include('../partials/footer') %>

<script>
  const postCommentBtns = document.querySelectorAll(".comment-btn")
  const editCommentBtns = document.querySelectorAll(".edit-comment-btn")

  postCommentBtns.forEach(btn => {
    btn.addEventListener("click", showComments)
  })
  editCommentBtns.forEach(btn => {
    btn.addEventListener("click", editComment)
  })

  function showComments(evt) {
    let postIdx = evt.target.id.slice(-1)
    document.getElementById(`post-${postIdx}-comments`).style.display = "contents"
  }

  function editComment(evt) {
    let commentIdx = evt.target.id.slice(-1)
    document.getElementById(`comment-${commentIdx}-header`).style.display = "none"
    document.getElementById(`edit-comment-btn-${commentIdx}`).style.display = "none"
    document.getElementById(`comment-${commentIdx}-text`).style.display = "none"
    document.getElementById(`edit-comment-${commentIdx}-text`).style.display = "contents"
  }
</script>